<!DOCTYPE html>
<html>
    <head>
        <title>Reaction Time Test</title>

        <style>
            :root
            {
                --top: 50;
                --left: 50;
            }

            body 
            {
                background-color: #303030;
            }
        </style>
    </head>
    <body>
        <div id="start-game" class="visible">
            <!--Title, Highscore from local storage, suwak difficulty-->
            <button class="start-game">START</button>
        </div>
        <div id="end-game" class="invisible">
            <!--score, highscore || new highscore-->
            <button class="start-game">PLAY AGAIN</button>
        </div>

        <span id="pre-counter"></span>

        <button class="button-visible" id="click-me"></button>

        <script>
            window.addEventListener("DOMContentLoaded", () => checkStorage());
            var startButtons = document.querySelectorAll(".start-game");
            startButtons.forEach((element) => {element.addEventListener("click", () => preGame())});

            var highscore;
            var preCounter = document.getElementById("pre-counter");

            const checkStorage = () => {
                if("Highscore" in localStorage)
                {
                    highscore = localStorage['Timezone'];
                }
                else 
                {
                    highscore = 0;
                }
            }

            const preGame = () => {
                let toChange = document.querySelectorAll(".visible");
                toChange.forEach((element) => {
                    element.classList.remove("visible");
                    element.classList.add("invisible");
                });

                preCounter.style.opacity = 1;
                preCounter.innerHTML = "3";
                setTimeout(() => { preCounter.innerHTML = "2"; }, 1000);
                setTimeout(() => { preCounter.innerHTML = "1"; }, 2000);
                setTimeout(() => { startGame() }, 3000);
            }

            const startGame = () => {
                console.log("start");
                preCounter.style.opacity = 0;
            }
        </script>
    </body>
</html>